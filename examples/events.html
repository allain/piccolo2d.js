<html>
  <head>
    <title>Event Example - Piccolo2d.js</title>
    <link rel="stylesheet" href="examples.css" />
  </head>
  <body>
  <canvas id="canvas" width="400" height="400">
    <p>No Canvas Support in this browser.</p>
  </canvas>

  <script type="text/javascript" src="../lib/javascript-1.6.js"></script>
  <script type="text/javascript" src="../extends.js"></script>
  <script type="text/javascript" src="../lib/jquery-1.3.2.min.js"></script>
  <script type="text/javascript" src="../piccolo2d.js"></script>
  <script type="text/javascript">
    // To deal with the case where firebug's console is not available'
    if (typeof console == "undefined") {
      console = {log: function() {}};
    }

    var pCanvas = new PCanvas('canvas');

    with ({
      camera: pCanvas.camera,
      layer : pCanvas.camera.layers[0]
    }) {
      var ZoomNode = PNode.extend({
        paintAfterChildren: function(ctx) {
          if (this.highlighted) {
            ctx.fillStyle = "rgb(0,0,255)";
            ctx.lineWidth = 10;
            ctx.strokeRect(0, 0, this.bounds.width, this.bounds.height);
          }
        }
      })

      for (var x=0; x<10; x++) {
        for (var y=0; y<10; y++) {
          layer.addChild(new ZoomNode({
            fillStyle: "rgb("+Math.round(Math.random()*255)+","+Math.round(Math.random()*255)+","+Math.round(Math.random()*255)+")",
            bounds: new PBounds(0,0, 100, 100),
          }).scale(0.25).translate(30*x, 30*y));
        }
      }

      layer.addListener({
        click: function(event) {
          var globalTransform = event.pickedNodes[0].getGlobalTransform();
          var inverse = globalTransform.getInverse();

          camera.animateViewToTransform(inverse, 500);
        },

        mouseout: function(event) {
          event.pickedNodes[0].highlighted = false;
        },

        mouseover: function(event) {
          event.pickedNodes[0].highlighted = true;
        }
      });
    }
  </script>
  <h1>Events Example</h1>
  <p>Click on a square to zoom in on it, or the white background to zoom out completely.</p>
</body>
</html>
